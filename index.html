<html>
  <head>
    <title>Kyousushi</title>

    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    function onDeviceReady() {
        navigator.geolocation.getCurrentPosition(onSuccess, onError);
    }
	
	/*
	* Calculate distance (in km) between two points specified by
	latitude/longitude with Haversine formula
	*/
	LatLong.distHaversine = function(p11, p12, p21, p22) {
		 var R = 6371; // earth's mean radius in km
		 var dLat  = p21.lat - p11.lat;
		 var dLong = p22.lon - p12.lon;
		 		  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
			  Math.cos(p1.lat) * Math.cos(p2.lat) * Math.sin(dLong/2) * Math.sin(dLong/2);
		 var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
		  var d = R * c;
		 
		  return d;
		}

    // onSuccess Geolocation
 function onSuccess(position) {
        var element = document.getElementById('gelocation');
		
		var distMe = LatLong.distHaversine( position.coords.latitude, position.coords.longitude, 49, 7);
		var distTh = LatLong.distHaversine( position.coords.latitude, position.coords.longitude, 48 , 6);		
		
        element.innerHTML = '<div onClick= window.location.replace(\'http://www.thionville.fr\') style=" border: solid thick black; border-radius: 1em; ; height:40%"> Restaurant de Thionville <br/> Distance : + ' distMe + '<br/></div>'
		'<div onClick= window.location.replace(\'http://www.metz.fr\') style=" border: solid thick black; border-radius: 1em; margin-top:10%; height:40%"> Restaurant de Metz <br/> Distance : + ' distTh + '<br/></div>'
		
		if(distMe < distTh){div1.style.backgroundColor = "0066FF";
							div2.style.backgroundColor = "CECECE";}
		else {div2.style.backgroundColor = "0066FF";
			 div1.style.backgroundColor = "CECECE";}

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }
	
	/**
 * Map Pointers
$(document).ready(function(){
 var map = new GMaps({
    el: '#pointers_map',
    lat: 51.5073346,
    lng: -0.1276831,
    zoom: 13,
    zoomControl : true,
    zoomControlOpt: {
        style : 'SMALL',
        position: 'TOP_LEFT'
    },
    panControl : false,
  });
    map.addMarker({
      lat: 51.5089465,
      lng: -0.0764269,
      title: 'Tower Of London',
      infoWindow: {
        content: '
Her Majesty\'s Royal Palace and Fortress, more commonly known as the Tower of London, is a historic castle on the north bank of the River Thames in central London, England, United Kingdom.
'
      }
    });
	http://paulund.developpez.com/tutoriels/jquery/cartes-gmapjs/
	*/
    </script>
  </head>
  <body>
        <div class="app">
            <h1>Kyousushi</h1>
            <div id="deviceready" class="blink">
				<p class="event listening" id="geolocation" style="margin-top:60%; text-align:center;">
				<b>Recherche de gélocalisation...</b></p>
				<p class="event received">
			<div id="page">
	
			
		</div>
	
		</p>
	</div>
</div>
	
	
	<script type="text/javascript" src="js/index.js"></script>
  </body>
</html>